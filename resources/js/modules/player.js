import Plyr from 'plyr';
import 'plyr/dist/plyr.css';
let body = $('body');

const generateControls = (title = null) => {
    const titleEl = title ? `<div class="plyr__title"><span class="plyr__title__inner">${title}</span></div>` : '';
    return `
    <div class="plyr__controls">
        <button type="button" class="plyr__control plyr__control--play-button" aria-label="Play, {title}" data-plyr="play">
            <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-pause"></use></svg>
            <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-play"></use></svg>
            <span class="label--pressed plyr__tooltip" role="tooltip">Пауза</span>
            <span class="label--not-pressed plyr__tooltip" role="tooltip">Воспроизвести</span>
        </button>
        <div class="plyr__controls__outer">
            ${titleEl}
            <div class="plyr__controls__inner">
                <div class="plyr__progress">
                    <input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" aria-label="Seek">
                    <progress class="plyr__progress__buffer" min="0" max="100" value="0">% buffered</progress>
                    <span role="tooltip" class="plyr__tooltip">00:00</span>
                </div>
              
                <div class="plyr__time-container">
                     <span class="plyr__time plyr__time--current" aria-label="Current time">00:00</span>
                    <span class="plyr__time plyr__time--duration" aria-label="Duration">00:00</span>
                </div>
            
                <button type="button" class="plyr__control" aria-label="Mute" data-plyr="mute">
                    <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-muted"></use></svg>
                    <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-volume"></use></svg>
                    <span class="label--pressed plyr__tooltip" role="tooltip">Отключить звук</span>
                    <span class="label--not-pressed plyr__tooltip" role="tooltip">Включить звук</span>
                </button>
                <div class="plyr__volume">
                    <input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" aria-label="Громкость">
                </div>
                <button type="button" class="plyr__control plyr__control--embed">
                    <i class="fa fa-code"></i>
                    <span class="plyr__tooltip" role="tooltip">Код для вставки</span>     
                 </button>
               
                <button type="button" class="plyr__control" data-plyr="fullscreen">
                    <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-exit-fullscreen"></use></svg>
                    <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-enter-fullscreen"></use></svg>
                    <span class="label--pressed plyr__tooltip" role="tooltip">Развернуть</span>
                    <span class="label--not-pressed plyr__tooltip" role="tooltip">Свернуть</span>
                </button>
            </div>
        </div>
    </div>
    `;
}

window.execOnMounted.push(function() {
    $('.own-player').each(function() {
        let playerEl = this;
        let title = $(playerEl).data('title');
        const player = new Plyr(playerEl, {
            controls: generateControls(title)
        });
        playerEl.addEventListener('ready', event => {
            if ($(playerEl).hasClass('own-player--radio')) {
                $(playerEl).parents('.plyr').find('.plyr__title').append(` <a class="plyr__site-logo" href="/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 235 30" version="1.1">
                    <path d="M 21 0 C 7.15384 0 3 4.21875 3 4.21875 C 3 4.21875 0 6.499975 0 15.234375 C 0 23.968775 3 26.25 3 26.25 C 3 26.25 8.53846 30 21 30 C 30.6593 30 36.159531 27.747675 38.144531 26.734375 L 34.439453 25.041016 C 34.225753 25.115616 33.999919 25.189725 33.761719 25.265625 C 31.116519 26.108425 26.9245 27 21 27 C 15.0755 27 10.883491 26.108425 8.2382812 25.265625 C 6.9135712 24.843525 5.9689856 24.432131 5.3847656 24.144531 C 5.1578756 24.032731 4.9856944 23.938894 4.8652344 23.871094 C 4.7428044 23.717394 4.502705 23.377803 4.234375 22.783203 C 3.690445 21.577803 3 19.258675 3 15.234375 C 3 11.209975 3.690445 8.8909769 4.234375 7.6855469 C 4.506905 7.0815869 4.7504938 6.7400737 4.8710938 6.5898438 C 4.8945838 6.5605837 4.9132544 6.5378344 4.9277344 6.5214844 L 4.9863281 6.4765625 L 5.0898438 6.3730469 L 5.1074219 6.3574219 C 5.1645419 6.3105719 5.2944394 6.2102956 5.5058594 6.0722656 C 5.9275594 5.7969356 6.68622 5.3648694 7.875 4.9121094 C 10.25105 4.0071594 14.3816 3 21 3 C 27.6184 3 31.749 4.0071594 34.125 4.9121094 C 34.6534 5.1133394 35.096091 5.3114075 35.462891 5.4921875 L 38.740234 3.9941406 C 37.646634 3.1204506 32.9076 0 21 0 z M 60.349609 4.6992188 L 60.349609 6.1503906 L 58.900391 6.1503906 L 58.900391 7.5996094 L 57.449219 7.5996094 L 57.449219 13.400391 L 58.900391 13.400391 L 58.900391 14.849609 L 60.349609 14.849609 L 60.349609 16.300781 L 67.599609 16.300781 L 67.599609 17.75 L 69.050781 17.75 L 69.050781 20.650391 L 67.599609 20.650391 L 67.599609 22.099609 L 61.800781 22.099609 L 61.800781 20.650391 L 60.349609 20.650391 L 60.349609 19.199219 L 57.449219 19.199219 L 57.449219 22.099609 L 58.900391 22.099609 L 58.900391 23.550781 L 60.349609 23.550781 L 60.349609 25 L 69.050781 25 L 69.050781 23.550781 L 70.5 23.550781 L 70.5 22.099609 L 71.949219 22.099609 L 71.949219 16.300781 L 70.5 16.300781 L 70.5 14.849609 L 69.050781 14.849609 L 69.050781 13.400391 L 61.800781 13.400391 L 61.800781 11.949219 L 60.349609 11.949219 L 60.349609 9.0507812 L 61.800781 9.0507812 L 61.800781 7.5996094 L 67.599609 7.5996094 L 67.599609 9.0507812 L 69.050781 9.0507812 L 69.050781 10.5 L 71.949219 10.5 L 71.949219 7.5996094 L 70.5 7.5996094 L 70.5 6.1503906 L 69.050781 6.1503906 L 69.050781 4.6992188 L 60.349609 4.6992188 z M 74.837891 4.6992188 L 74.837891 7.5996094 L 80.638672 7.5996094 L 80.638672 25 L 83.539062 25 L 83.539062 7.5996094 L 89.337891 7.5996094 L 89.337891 4.6992188 L 74.837891 4.6992188 z M 98.027344 4.6992188 L 98.027344 6.1503906 L 96.578125 6.1503906 L 96.578125 7.5996094 L 95.126953 7.5996094 L 95.126953 9.0507812 L 93.677734 9.0507812 L 93.677734 10.5 L 92.226562 10.5 L 92.226562 25 L 95.126953 25 L 95.126953 19.199219 L 103.82617 19.199219 L 103.82617 25 L 106.72656 25 L 106.72656 10.5 L 105.27734 10.5 L 105.27734 9.0507812 L 103.82617 9.0507812 L 103.82617 7.5996094 L 102.37695 7.5996094 L 102.37695 6.1503906 L 100.92773 6.1503906 L 100.92773 4.6992188 L 98.027344 4.6992188 z M 109.61523 4.6992188 L 109.61523 25 L 112.51562 25 L 112.51562 16.300781 L 113.9668 16.300781 L 113.9668 17.75 L 115.41602 17.75 L 115.41602 19.199219 L 116.86523 19.199219 L 116.86523 20.650391 L 118.31641 20.650391 L 118.31641 22.099609 L 119.76562 22.099609 L 119.76562 23.550781 L 121.2168 23.550781 L 121.2168 25 L 124.11523 25 L 124.11523 22.099609 L 122.66602 22.099609 L 122.66602 20.650391 L 121.2168 20.650391 L 121.2168 19.199219 L 119.76562 19.199219 L 119.76562 17.75 L 118.31641 17.75 L 118.31641 16.300781 L 121.2168 16.300781 L 121.2168 14.849609 L 122.66602 14.849609 L 122.66602 13.400391 L 124.11523 13.400391 L 124.11523 7.5996094 L 122.66602 7.5996094 L 122.66602 6.1503906 L 121.2168 6.1503906 L 121.2168 4.6992188 L 109.61523 4.6992188 z M 129.9043 4.6992188 L 129.9043 6.1503906 L 128.45508 6.1503906 L 128.45508 7.5996094 L 127.00586 7.5996094 L 127.00586 22.099609 L 128.45508 22.099609 L 128.45508 23.550781 L 129.9043 23.550781 L 129.9043 25 L 138.60547 25 L 138.60547 23.550781 L 140.05469 23.550781 L 140.05469 22.099609 L 141.50586 22.099609 L 141.50586 7.5996094 L 140.05469 7.5996094 L 140.05469 6.1503906 L 138.60547 6.1503906 L 138.60547 4.6992188 L 129.9043 4.6992188 z M 144.39258 4.6992188 L 144.39258 25 L 158.89258 25 L 158.89258 22.099609 L 147.29297 22.099609 L 147.29297 16.300781 L 155.99219 16.300781 L 155.99219 13.400391 L 147.29297 13.400391 L 147.29297 7.5996094 L 158.89258 7.5996094 L 158.89258 4.6992188 L 144.39258 4.6992188 z M 161.78125 4.6992188 L 161.78125 7.5996094 L 167.58203 7.5996094 L 167.58203 25 L 170.48242 25 L 170.48242 7.5996094 L 176.28125 7.5996094 L 176.28125 4.6992188 L 161.78125 4.6992188 z M 179.17188 4.6992188 L 179.17188 20.650391 L 180.62109 20.650391 L 180.62109 22.099609 L 182.07031 22.099609 L 182.07031 23.550781 L 183.52148 23.550781 L 183.52148 25 L 189.32031 25 L 189.32031 23.550781 L 190.77148 23.550781 L 190.77148 22.099609 L 192.2207 22.099609 L 192.2207 20.650391 L 193.67188 20.650391 L 193.67188 4.6992188 L 190.77148 4.6992188 L 190.77148 19.199219 L 189.32031 19.199219 L 189.32031 20.650391 L 187.87109 20.650391 L 187.87109 22.099609 L 184.9707 22.099609 L 184.9707 20.650391 L 183.52148 20.650391 L 183.52148 19.199219 L 182.07031 19.199219 L 182.07031 4.6992188 L 179.17188 4.6992188 z M 205.26562 4.6992188 L 205.26562 6.1503906 L 203.81445 6.1503906 L 203.81445 7.5996094 L 202.36523 7.5996094 L 202.36523 13.400391 L 203.81445 13.400391 L 203.81445 14.849609 L 205.26562 14.849609 L 205.26562 16.300781 L 212.51562 16.300781 L 212.51562 17.75 L 213.96484 17.75 L 213.96484 20.650391 L 212.51562 20.650391 L 212.51562 22.099609 L 206.71484 22.099609 L 206.71484 20.650391 L 205.26562 20.650391 L 205.26562 19.199219 L 202.36523 19.199219 L 202.36523 22.099609 L 203.81445 22.099609 L 203.81445 23.550781 L 205.26562 23.550781 L 205.26562 25 L 213.96484 25 L 213.96484 23.550781 L 215.41406 23.550781 L 215.41406 22.099609 L 216.86523 22.099609 L 216.86523 16.300781 L 215.41406 16.300781 L 215.41406 14.849609 L 213.96484 14.849609 L 213.96484 13.400391 L 206.71484 13.400391 L 206.71484 11.949219 L 205.26562 11.949219 L 205.26562 9.0507812 L 206.71484 9.0507812 L 206.71484 7.5996094 L 212.51562 7.5996094 L 212.51562 9.0507812 L 213.96484 9.0507812 L 213.96484 10.5 L 216.86523 10.5 L 216.86523 7.5996094 L 215.41406 7.5996094 L 215.41406 6.1503906 L 213.96484 6.1503906 L 213.96484 4.6992188 L 205.26562 4.6992188 z M 219.75391 4.6992188 L 219.75391 22.099609 L 221.20312 22.099609 L 221.20312 23.550781 L 222.6543 23.550781 L 222.6543 25 L 231.35352 25 L 231.35352 23.550781 L 232.80469 23.550781 L 232.80469 22.099609 L 234.25391 22.099609 L 234.25391 4.6992188 L 231.35352 4.6992188 L 231.35352 20.650391 L 229.9043 20.650391 L 229.9043 22.099609 L 224.10352 22.099609 L 224.10352 20.650391 L 222.6543 20.650391 L 222.6543 4.6992188 L 219.75391 4.6992188 z M 112.51562 7.5996094 L 119.76562 7.5996094 L 119.76562 9.0507812 L 121.2168 9.0507812 L 121.2168 11.949219 L 119.76562 11.949219 L 119.76562 13.400391 L 112.51562 13.400391 L 112.51562 7.5996094 z M 131.35547 7.5996094 L 137.1543 7.5996094 L 137.1543 9.0507812 L 138.60547 9.0507812 L 138.60547 20.650391 L 137.1543 20.650391 L 137.1543 22.099609 L 131.35547 22.099609 L 131.35547 20.650391 L 129.9043 20.650391 L 129.9043 9.0507812 L 131.35547 9.0507812 L 131.35547 7.5996094 z M 28.292969 8.6835938 L 14 15.5 L 28.292969 22.316406 L 28.292969 15.59375 L 43 22.316406 L 43 8.6835938 L 28.292969 15.40625 L 28.292969 8.6835938 z M 98.027344 9.0507812 L 100.92773 9.0507812 L 100.92773 10.5 L 102.37695 10.5 L 102.37695 11.949219 L 103.82617 11.949219 L 103.82617 16.300781 L 95.126953 16.300781 L 95.126953 11.949219 L 96.578125 11.949219 L 96.578125 10.5 L 98.027344 10.5 L 98.027344 9.0507812 z M 196.55859 22.099609 L 196.55859 25 L 199.45898 25 L 199.45898 22.099609 L 196.55859 22.099609 z " id="path1241"/>
                    </svg>
                </a>`);
            } else {
                $(playerEl).parents('.plyr').append(` <a class="plyr__site-logo" href="/" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54 53" version="1.1">
                      <path d="M 20.535156 0 C 7.6549963 0 3.7910156 3.9238281 3.7910156 3.9238281 C 3.7910156 3.9238281 1 6.046885 1 14.171875 C 1 22.296875 3.7910156 24.417969 3.7910156 24.417969 C 3.7910156 24.417969 8.9430063 27.90625 20.535156 27.90625 C 29.520556 27.90625 34.635922 25.811741 36.482422 24.869141 L 33.037109 23.292969 C 32.838309 23.362369 32.62785 23.433306 32.40625 23.503906 C 29.94565 24.287906 26.046256 25.117188 20.535156 25.117188 C 15.023956 25.117188 11.122739 24.287906 8.6621094 23.503906 C 7.4298194 23.111306 6.5532156 22.728638 6.0097656 22.460938 C 5.7986956 22.357038 5.6374506 22.270031 5.5253906 22.207031 C 5.4115006 22.064031 5.1890631 21.746559 4.9394531 21.193359 C 4.4334731 20.072059 3.7910156 17.915475 3.7910156 14.171875 C 3.7910156 10.428275 4.4334731 8.2697675 4.9394531 7.1484375 C 5.1929631 6.5866175 5.41906 6.2706094 5.53125 6.1308594 C 5.5531 6.1036394 5.5705044 6.0816062 5.5839844 6.0664062 L 5.6386719 6.0253906 L 5.734375 5.9277344 L 5.7519531 5.9140625 C 5.8050831 5.8704725 5.9244237 5.7768375 6.1210938 5.6484375 C 6.5133738 5.3923175 7.2203219 4.9914925 8.3261719 4.5703125 C 10.536472 3.7284925 14.378456 2.7910156 20.535156 2.7910156 C 26.691856 2.7910156 30.533741 3.7284925 32.744141 4.5703125 C 33.235641 4.7575025 33.647081 4.941215 33.988281 5.109375 L 37.037109 3.7148438 C 36.019709 2.9021137 31.611956 0 20.535156 0 z M 27.318359 8.078125 L 14.023438 14.417969 L 27.318359 20.759766 L 27.318359 14.505859 L 41 20.759766 L 41 8.078125 L 27.318359 14.330078 L 27.318359 8.078125 z M 32.486328 35 L 32.486328 36 L 32.986328 36 L 32.986328 36.5 L 33.486328 36.5 L 33.486328 37 L 34.486328 37 L 34.486328 36.5 L 34.986328 36.5 L 34.986328 36 L 35.486328 36 L 35.486328 35 L 34.486328 35 L 34.486328 35.5 L 33.486328 35.5 L 33.486328 35 L 32.486328 35 z M 1.5 36 L 1.5 36.5 L 1 36.5 L 1 37 L 0.5 37 L 0.5 42 L 1 42 L 1 42.5 L 1.5 42.5 L 1.5 43 L 4.5 43 L 4.5 42.5 L 5 42.5 L 5 42 L 5.5 42 L 5.5 41 L 4.5 41 L 4.5 41.5 L 4 41.5 L 4 42 L 2 42 L 2 41.5 L 1.5 41.5 L 1.5 37.5 L 2 37.5 L 2 37 L 4 37 L 4 37.5 L 4.5 37.5 L 4.5 38 L 5.5 38 L 5.5 37 L 5 37 L 5 36.5 L 4.5 36.5 L 4.5 36 L 1.5 36 z M 6.4960938 36 L 6.4960938 37 L 8.4960938 37 L 8.4960938 43 L 9.4960938 43 L 9.4960938 37 L 11.496094 37 L 11.496094 36 L 6.4960938 36 z M 14.492188 36 L 14.492188 36.5 L 13.992188 36.5 L 13.992188 37 L 13.492188 37 L 13.492188 37.5 L 12.992188 37.5 L 12.992188 38 L 12.492188 38 L 12.492188 43 L 13.492188 43 L 13.492188 41 L 16.492188 41 L 16.492188 43 L 17.492188 43 L 17.492188 38 L 16.992188 38 L 16.992188 37.5 L 16.492188 37.5 L 16.492188 37 L 15.992188 37 L 15.992188 36.5 L 15.492188 36.5 L 15.492188 36 L 14.492188 36 z M 18.488281 36 L 18.488281 43 L 19.488281 43 L 19.488281 40 L 22.488281 40 L 22.488281 39.5 L 22.988281 39.5 L 22.988281 39 L 23.488281 39 L 23.488281 37 L 22.988281 37 L 22.988281 36.5 L 22.488281 36.5 L 22.488281 36 L 18.488281 36 z M 24.484375 36 L 24.484375 43 L 27.484375 43 L 27.484375 42.5 L 27.984375 42.5 L 27.984375 42 L 28.484375 42 L 28.484375 40 L 27.984375 40 L 27.984375 39.5 L 27.484375 39.5 L 27.484375 39 L 25.484375 39 L 25.484375 36 L 24.484375 36 z M 29.484375 36 L 29.484375 43 L 30.484375 43 L 30.484375 36 L 29.484375 36 z M 19.488281 37 L 21.988281 37 L 21.988281 37.5 L 22.488281 37.5 L 22.488281 38.5 L 21.988281 38.5 L 21.988281 39 L 19.488281 39 L 19.488281 37 z M 31.486328 37 L 31.486328 43 L 32.486328 43 L 32.486328 41.5 L 32.986328 41.5 L 32.986328 41 L 33.486328 41 L 33.486328 40.5 L 33.986328 40.5 L 33.986328 40 L 34.486328 40 L 34.486328 39.5 L 34.986328 39.5 L 34.986328 39 L 35.486328 39 L 35.486328 43 L 36.486328 43 L 36.486328 37 L 35.486328 37 L 35.486328 37.5 L 34.986328 37.5 L 34.986328 38 L 34.486328 38 L 34.486328 38.5 L 33.986328 38.5 L 33.986328 39 L 33.486328 39 L 33.486328 39.5 L 32.986328 39.5 L 32.986328 40 L 32.486328 40 L 32.486328 37 L 31.486328 37 z M 14.492188 37.5 L 15.492188 37.5 L 15.492188 38 L 15.992188 38 L 15.992188 38.5 L 16.492188 38.5 L 16.492188 40 L 13.492188 40 L 13.492188 38.5 L 13.992188 38.5 L 13.992188 38 L 14.492188 38 L 14.492188 37.5 z M 25.484375 40 L 26.984375 40 L 26.984375 40.5 L 27.484375 40.5 L 27.484375 41.5 L 26.984375 41.5 L 26.984375 42 L 25.484375 42 L 25.484375 40 z M 0.5 46 L 0.5 47 L 2.5 47 L 2.5 53 L 3.5 53 L 3.5 47 L 5.5 47 L 5.5 46 L 0.5 46 z M 6.4960938 46 L 6.4960938 53 L 11.496094 53 L 11.496094 52 L 7.4960938 52 L 7.4960938 50 L 10.496094 50 L 10.496094 49 L 7.4960938 49 L 7.4960938 47 L 11.496094 47 L 11.496094 46 L 6.4960938 46 z M 13.492188 46 L 13.492188 52 L 12.492188 52 L 12.492188 53 L 13.992188 53 L 13.992188 52.5 L 14.492188 52.5 L 14.492188 47 L 16.492188 47 L 16.492188 53 L 17.492188 53 L 17.492188 46 L 13.492188 46 z M 18.488281 46 L 18.488281 53 L 23.488281 53 L 23.488281 52 L 19.488281 52 L 19.488281 50 L 22.488281 50 L 22.488281 49 L 19.488281 49 L 19.488281 47 L 23.488281 47 L 23.488281 46 L 18.488281 46 z M 24.484375 46 L 24.484375 53 L 28.484375 53 L 28.484375 52.5 L 28.984375 52.5 L 28.984375 52 L 29.484375 52 L 29.484375 50 L 28.984375 50 L 28.984375 49 L 29.484375 49 L 29.484375 47 L 28.984375 47 L 28.984375 46.5 L 28.484375 46.5 L 28.484375 46 L 24.484375 46 z M 30.480469 46 L 30.480469 53 L 31.480469 53 L 31.480469 51.5 L 31.980469 51.5 L 31.980469 51 L 32.480469 51 L 32.480469 50.5 L 32.980469 50.5 L 32.980469 50 L 33.480469 50 L 33.480469 49.5 L 33.980469 49.5 L 33.980469 49 L 34.480469 49 L 34.480469 53 L 35.480469 53 L 35.480469 46 L 34.480469 46 L 34.480469 47.5 L 33.980469 47.5 L 33.980469 48 L 33.480469 48 L 33.480469 48.5 L 32.980469 48.5 L 32.980469 49 L 32.480469 49 L 32.480469 49.5 L 31.980469 49.5 L 31.980469 50 L 31.480469 50 L 31.480469 46 L 30.480469 46 z M 37.476562 46 L 37.476562 46.5 L 36.976562 46.5 L 36.976562 47 L 36.476562 47 L 36.476562 48 L 37.476562 48 L 37.476562 47.5 L 37.976562 47.5 L 37.976562 47 L 39.976562 47 L 39.976562 47.5 L 40.476562 47.5 L 40.476562 48.5 L 39.976562 48.5 L 39.976562 49 L 38.476562 49 L 38.476562 50 L 39.976562 50 L 39.976562 50.5 L 40.476562 50.5 L 40.476562 51.5 L 39.976562 51.5 L 39.976562 52 L 37.976562 52 L 37.976562 51.5 L 37.476562 51.5 L 37.476562 51 L 36.476562 51 L 36.476562 52 L 36.976562 52 L 36.976562 52.5 L 37.476562 52.5 L 37.476562 53 L 40.476562 53 L 40.476562 52.5 L 40.976562 52.5 L 40.976562 52 L 41.476562 52 L 41.476562 50 L 40.976562 50 L 40.976562 49 L 41.476562 49 L 41.476562 47 L 40.976562 47 L 40.976562 46.5 L 40.476562 46.5 L 40.476562 46 L 37.476562 46 z M 43.472656 46 L 43.472656 46.5 L 42.972656 46.5 L 42.972656 47 L 42.472656 47 L 42.472656 52 L 42.972656 52 L 42.972656 52.5 L 43.472656 52.5 L 43.472656 53 L 46.472656 53 L 46.472656 52.5 L 46.972656 52.5 L 46.972656 52 L 47.472656 52 L 47.472656 47 L 46.972656 47 L 46.972656 46.5 L 46.472656 46.5 L 46.472656 46 L 43.472656 46 z M 48.46875 46 L 48.46875 53 L 49.46875 53 L 49.46875 50 L 52.46875 50 L 52.46875 49.5 L 52.96875 49.5 L 52.96875 49 L 53.46875 49 L 53.46875 47 L 52.96875 47 L 52.96875 46.5 L 52.46875 46.5 L 52.46875 46 L 48.46875 46 z M 25.484375 47 L 27.984375 47 L 27.984375 47.5 L 28.484375 47.5 L 28.484375 48.5 L 27.984375 48.5 L 27.984375 49 L 25.484375 49 L 25.484375 47 z M 43.972656 47 L 45.972656 47 L 45.972656 47.5 L 46.472656 47.5 L 46.472656 51.5 L 45.972656 51.5 L 45.972656 52 L 43.972656 52 L 43.972656 51.5 L 43.472656 51.5 L 43.472656 47.5 L 43.972656 47.5 L 43.972656 47 z M 49.46875 47 L 51.96875 47 L 51.96875 47.5 L 52.46875 47.5 L 52.46875 48.5 L 51.96875 48.5 L 51.96875 49 L 49.46875 49 L 49.46875 47 z M 25.484375 50 L 27.984375 50 L 27.984375 50.5 L 28.484375 50.5 L 28.484375 51.5 L 27.984375 51.5 L 27.984375 52 L 25.484375 52 L 25.484375 50 z "/>
                    </svg>
                </a>`);
            }
        });
    });
});

$(body).on('click', '.plyr__control--embed', function() {
    let player = $(this).parents('.plyr');
    let playerEl = $(player).find('.player-el');
    let id = $(playerEl).data('id');
    let url = 'http://staroetv.su' + $(playerEl).data('url');
    let code = $(player).hasClass('own-player--radio') ? `<iframe frameborder="0" src="http://staroetv.su/embed/${id}" width="640" height="105" allowfullscreen></iframe>` : `<iframe frameborder="0" src="http://staroetv.su/embed/${id}" width="640" height="480" allowfullscreen></iframe>`;
    code = code.replace(/[\u00A0-\u9999<>\&]/gim, function(i) {
        return '&#' + i.charCodeAt(0) + ';';
    });
    $('.plyr').append(`<div class="embed">        
        <div class="embed__inner">   
            <div class="embed__copy">
                <div class="embed__copy__title">Код для вставки</div>
                <div class="embed__copy__text embed__copy__text--small">${code}</div>
            </div>
             <div class="embed__copy">
                <div class="embed__copy__title">Прямая ссылка на страницу записи</div>
                <div class="embed__copy__text">${url}</div>
            </div>
            <div class="embed__description">Нажмите на ссылку, чтобы выделить ее</div>
        </div>
    </div>`);
});
$(body).on('click', '.embed', function(e) {
    $(this).remove();
});

$(body).on('click', '.embed__copy__text', function(e) {
    window.getSelection().selectAllChildren(
        $(this)[0]
    );
    e.preventDefault();
    e.stopPropagation();
})
